# Web Content Monitor

è¿™æ˜¯ä¸€ä¸ªé€šç”¨çš„ç½‘é¡µå†…å®¹ç›‘æ§ç³»ç»Ÿï¼Œç”±ä¸€ä¸ª FastAPI åç«¯å’Œä¸€ä¸ª Vue.js å‰ç«¯ç»„æˆã€‚å®ƒå…è®¸ç”¨æˆ·é€šè¿‡é…ç½®æ–‡ä»¶æˆ– Web UI æ¥å®šä¹‰å’Œç®¡ç†ç›‘æ§ä»»åŠ¡ï¼Œå½“æ£€æµ‹åˆ°æŒ‡å®šç½‘é¡µå†…å®¹å‘ç”Ÿæ˜¾è‘—å˜åŒ–æ—¶ï¼Œä¼šé€šè¿‡å¤šç§æ¸ é“å‘é€é€šçŸ¥ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

- **åŠ¨æ€ä»»åŠ¡é…ç½®**: é€šè¿‡ `config.yaml` æˆ– Web UI å®æ—¶å¢ã€åˆ ã€æ”¹ã€æŸ¥ç›‘æ§ä»»åŠ¡ã€‚
- **å¼ºå¤§çš„å†…å®¹æå–**: æ”¯æŒ `CSS Selector`, `XPath` å’Œ `Regex` ä¸‰ç§è§„åˆ™æå–ç½‘é¡µå†…å®¹ã€‚
- **å³æ—¶å˜æ›´æ£€æµ‹**: åªè¦å†…å®¹å‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œç«‹å³è§¦å‘é€šçŸ¥ã€‚
- **AIæ™ºèƒ½é€šçŸ¥**: ğŸ†• ä½¿ç”¨AIåˆ†æå†…å®¹å˜åŒ–ï¼Œç”Ÿæˆç®€æ´ç¾è§‚çš„é€šçŸ¥ï¼Œå‘Šåˆ«å†—é•¿çš„HTMLæ‘˜è¦ã€‚
- **å¤šç§é€šçŸ¥æ¸ é“**: å†…ç½®æ”¯æŒ **Telegram** å’Œ **é£ä¹¦** æœºå™¨äººé€šçŸ¥ã€‚
- **å¤±è´¥é‡è¯•ä¸æˆªå›¾**: ä»»åŠ¡æ‰§è¡Œå¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•ï¼Œå¹¶å¯åœ¨å˜æ›´æ—¶è‡ªåŠ¨æˆªå›¾å­˜æ¡£ã€‚
- **ç°ä»£åŒ– Web UI**: åŸºäº Vue 3 å’Œ Element Plus çš„ç®¡ç†åå°ï¼Œæ“ä½œç›´è§‚ã€‚
- **å¼‚æ­¥ä»»åŠ¡è°ƒåº¦**: ä½¿ç”¨ APScheduler å¹¶å‘æ‰§è¡Œæ‰€æœ‰ç›‘æ§ä»»åŠ¡ï¼Œæ€§èƒ½ä¼˜ç§€ã€‚

## ğŸ›ï¸ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ backend/            # FastAPI åç«¯åº”ç”¨
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/        # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ core/       # æ ¸å¿ƒæ¨¡å— (é…ç½®, è°ƒåº¦å™¨)
â”‚   â”‚   â”œâ”€â”€ services/   # ä¸šåŠ¡é€»è¾‘ (ç›‘æ§, é€šçŸ¥)
â”‚   â”‚   â””â”€â”€ main.py     # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/           # Vue.js å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ logs/               # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ storage/            # ä»»åŠ¡å†…å®¹æŒä¹…åŒ–å­˜å‚¨
â”œâ”€â”€ screenshots/        # ç›‘æ§æˆªå›¾
â””â”€â”€ config.yaml         # ç›‘æ§ä»»åŠ¡é…ç½®æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¯åŠ¨

ä½ éœ€è¦ **Node.js (v18+)** å’Œ **Python (v3.9+)** ç¯å¢ƒã€‚

### 1. åç«¯å¯åŠ¨

æ‰“å¼€**ç¬¬ä¸€ä¸ªç»ˆç«¯çª—å£**ï¼š

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# åˆ›å»ºå¹¶æ¿€æ´» Python è™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate
# (Windows ç”¨æˆ·: venv\Scripts\activate)

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é¦–æ¬¡è¿è¡Œéœ€è¦å®‰è£… Playwright çš„æµè§ˆå™¨é©±åŠ¨
# æ­¤å‘½ä»¤å·²é›†æˆåœ¨åº”ç”¨å¯åŠ¨äº‹ä»¶ä¸­ï¼Œä½†ä¹Ÿå¯æ‰‹åŠ¨æ‰§è¡Œ
playwright install

# å¯åŠ¨åç«¯å¼€å‘æœåŠ¡å™¨
uvicorn app.main:app --reload
```
åç«¯æœåŠ¡è¿è¡Œåœ¨ `http://127.0.0.1:8000`ã€‚

### 3. AIæ™ºèƒ½é€šçŸ¥é…ç½®ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³ä½¿ç”¨AIæ™ºèƒ½é€šçŸ¥åŠŸèƒ½ï¼Œéœ€è¦é…ç½®OpenAI APIï¼š

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„OpenAI APIå¯†é’¥
# OPENAI_API_KEY=your_actual_api_key_here
```

**AIåŠŸèƒ½è¯´æ˜ï¼š**
- å¯ç”¨åï¼ŒAIä¼šåˆ†æå†…å®¹å˜åŒ–å¹¶ç”Ÿæˆç®€æ´ç¾è§‚çš„é€šçŸ¥
- æ”¯æŒç”¨è‡ªç„¶è¯­è¨€æè¿°ç›‘æ§é‡ç‚¹ï¼Œå¦‚"æˆ‘æƒ³ç›‘æ§ç‰ˆæœ¬å·å˜åŒ–ã€ä¸‹è½½é“¾æ¥æ›´æ–°"
- å¦‚æœä¸é…ç½®APIå¯†é’¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å›é€€åˆ°ä¼ ç»Ÿçš„HTMLæ‘˜è¦é€šçŸ¥
- æ¨èä½¿ç”¨é£ä¹¦é€šçŸ¥ä»¥è·å¾—æœ€ä½³çš„Markdownæ¸²æŸ“æ•ˆæœ

### 4. å‰ç«¯å¯åŠ¨

æ‰“å¼€**ç¬¬äºŒä¸ªç»ˆç«¯çª—å£**ï¼š

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
# å¦‚æœé‡åˆ°è¿æ¥åç«¯è¶…æ—¶ (ETIMEDOUT) çš„é—®é¢˜ï¼Œè¯·å°è¯•ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤
# http_proxy="" https_proxy="" npm run dev
npm run dev
```
å‰ç«¯æœåŠ¡è¿è¡Œåœ¨ `http://localhost:5173`ã€‚åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æ­¤åœ°å€å³å¯è®¿é—®ç®¡ç†åå°ã€‚

## âš™ï¸ é…ç½®è¯´æ˜

æ‰€æœ‰ä»»åŠ¡é…ç½®éƒ½åœ¨æ ¹ç›®å½•çš„ `config.yaml` æ–‡ä»¶ä¸­ã€‚

- **`default_notification`**: å…¨å±€é»˜è®¤çš„é€šçŸ¥è®¾ç½®ã€‚
- **`tasks`**: ç›‘æ§ä»»åŠ¡åˆ—è¡¨ã€‚

æ¯ä¸ªä»»åŠ¡åŒ…å«ä»¥ä¸‹å­—æ®µï¼š
- `name`: (å¿…é¡») ä»»åŠ¡å”¯ä¸€åç§°ã€‚
- `url`: (å¿…é¡») è¦ç›‘æ§çš„ç½‘é¡µ URLã€‚
- `frequency`: (å¿…é¡») ç›‘æ§é¢‘ç‡ï¼Œæ ¼å¼ä¸º `æ•°å­—`+`å•ä½` (s, m, h, d)ã€‚ä¾‹å¦‚ `10m`, `1h`ã€‚
- `rule`: æå–è§„åˆ™ï¼Œæ ¼å¼ä¸º `css:selector`, `xpath:expression` æˆ– `regex:pattern`ã€‚
- `enabled`: (å¯é€‰) æ˜¯å¦å¯ç”¨ä»»åŠ¡ï¼Œé»˜è®¤ä¸º `true`ã€‚
- `screenshot`: (å¯é€‰) æ˜¯å¦åœ¨æ¯æ¬¡æ£€æµ‹æ—¶æˆªå›¾ï¼Œé»˜è®¤ä¸º `false`ã€‚
- `notification`: (å¯é€‰) ç‹¬ç«‹çš„é€šçŸ¥é…ç½®ï¼Œä¼šè¦†ç›–å…¨å±€é…ç½®ã€‚
- `notification_template`: (å¯é€‰) è‡ªå®šä¹‰é€šçŸ¥æ¶ˆæ¯æ¨¡æ¿ã€‚

### ç¤ºä¾‹ `config.yaml`

```yaml
default_notification:
  telegram:
    enabled: false
    bot_token: "YOUR_TELEGRAM_BOT_TOKEN"
    chat_id: "YOUR_TELEGRAM_CHAT_ID"
  feishu:
    enabled: true
    webhook: "YOUR_FEISHU_WEBHOOK_URL"

tasks:
  - name: "V2EX-çƒ­æ¦œ"
    url: "https://www.v2ex.com/?tab=hot"
    frequency: "10m"
    rule: "css:span.item_title > a"
    enabled: true
    screenshot: false

  - name: "GitHub-Trending-Python"
    url: "https://github.com/trending/python?since=daily"
    frequency: "1h"
    rule: "css:article.Box-row"
    enabled: true
    screenshot: true
    # å¯é€‰çš„é€šçŸ¥æ¨¡æ¿ã€‚å¦‚æœä¸æä¾›ï¼Œåˆ™ä½¿ç”¨é»˜è®¤æ ¼å¼ã€‚
    # å¯ç”¨å ä½ç¬¦: {task_name}, {url}, {change_ratio}, {old_summary}, {new_summary}
    notification_template: "ã€{task_name}ã€‘å‘ç”Ÿæ›´æ–°ï¼\nå˜æ›´å¹…åº¦: {change_ratio}\næ‘˜è¦:\n{new_summary}"

```

---
*This project was built with the assistance of an AI programming partner.* 