INFO:app.api.content:内容获取成功 - 任务: 华为快应用引擎更新说明, 长度: 77288
INFO:     127.0.0.1:64915 - "POST /api/content/fetch HTTP/1.1" 200 OK
INFO:app.api.ai_preview:预览AI分析 - 任务: 华为快应用引擎更新说明, 描述: 我只想监控华为快应用引擎说吗的最新版本更新。1121这样的是版本号，指南是类型（类型不止指南，可能还有其他的），变更点和说明这几个字不需要带上，请生成一个适用飞书的通知，包含：版本号、实际的变更点内容（如安装开发工具）、实际的说吗内容（如"快应用官方示例"、“快应用研发助手”打开入口集成到加载器中。
详情请参见“开发准备>安装开发工具”。说明中如果带有超链接，那我们也弄超链接，比如这个开发准备>安装开发工具）。通知格式要求：包含emoji、简洁美观、结尾带上💡 此通知由版本监控系统自动生成。
INFO:app.services.ai_notifier:开始AI分析
INFO:httpx:HTTP Request: POST https://api.oaipro.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:app.services.ai_notifier:开始解析AI响应，长度: 2854 字符
INFO:app.services.ai_notifier:分段解析完成，共解析出 6 个分段
INFO:app.services.ai_notifier:成功解析出 6 个分段: ['analysis', 'title', 'code', 'summary', 'fields', 'rules']
INFO:app.services.ai_notifier:AI分析过程: **阶段1：HTML结构分析**
分析HTML内容，发现这是华为快应用引擎的版本更新说明页面，数据结构如下：
- 每个版本以"版本号版本更新说明（日期）"开头
- 版本号格式为4位数字（如1121、1119等）
- 每个版本包含多个分类：指南、组件、接口、框架等
- 每个分类下有变更点和说明两列
- 说明中包含HTML链接，格式为`<a href="URL">链接文本</a>`
- 最新版本（1121）位于页面顶部

**阶段2：字段映射**
根据用户需求，需要提取最新版本的以下字段：
- 版本号：1121（4位数字）
- 变更点内容：如"安装开发工具"、"华为快应用加载器使用指导"
- 说明内容：包含具体功能描述和链接的完整说明文本
- 链接转换：将HTML链接转换为Markdown格式

**阶段3：提取策略**
设计三个独立的正则表达式：
1. 版本号提取：匹配页面开头的4位数字版本号
2. 变更点提取：匹配最新版本下的所有变更点项目
3. 说明内容提取：匹配对应的说明文本，包含HTML链接

**阶段4：代码生成**
生成Python函数，包含HTML解析、数据提取、链接转换和...
INFO:app.services.ai_notifier:成功解析 3 个字段定义
INFO:app.services.ai_notifier:成功解析 3 个提取规则
INFO:app.services.ai_notifier:提取规则验证完成，共 3 个字段，3 个独立正则表达式
INFO:app.services.ai_notifier:原始代码长度: 1732 字符
INFO:app.services.ai_notifier:原始代码前200字符: def format_notification(extracted_data: dict, task_info: dict) -> str:
    """
    格式化华为快应用引擎更新通知
    Args:
        extracted_data: 提取的数据字典
        task_info: 任务信息 (name, url, current_time等)
    Retur
INFO:app.services.ai_notifier:代码清理完成，原长度: 1732, 清理后长度: 1720
INFO:app.services.ai_notifier:清理后代码长度: 1720 字符
INFO:app.services.ai_notifier:清理后代码前200字符: def format_notification(extracted_data: dict, task_info: dict) -> str:
    """
    格式化华为快应用引擎更新通知
    Args:
    extracted_data: 提取的数据字典
    task_info: 任务信息 (name, url, current_time等)
    Returns:
    
INFO:app.services.ai_notifier:Python代码安全验证通过
INFO:app.services.ai_notifier:AI分析结果解析成功
INFO:app.api.ai_preview:AI预览成功 - 任务: 华为快应用引擎更新说明
INFO:app.services.content_parser:尝试匹配字段 version，正则: ^(\d{4})版本更新说明
INFO:app.services.content_parser:内容长度: 77288，内容前200字符: 1121版本更新说明（2025-6-6） 指南 变更点 说明 安装开发工具 "快应用官方示例"、“快应用研发助手”打开入口集成到加载器中。 详情请参见“<a href="https://developer.huawei.com/consumer/cn/doc/quickApp-Guides/quickapp-installtool-0000001126543467">开发准备>安装开发工具</a>
INFO:app.services.content_parser:字段 version 匹配成功: 1121
INFO:app.api.ai_preview:成功提取字段 version: 1121...
INFO:app.services.content_parser:尝试匹配字段 changes，正则: (?:指南|组件|接口|框架)\s+变更点\s+说明\s+((?:[^\d]+(?=\s+[^\d])|[^\d]+(?=\s*$))+)
INFO:app.services.content_parser:内容长度: 77288，内容前200字符: 1121版本更新说明（2025-6-6） 指南 变更点 说明 安装开发工具 "快应用官方示例"、“快应用研发助手”打开入口集成到加载器中。 详情请参见“<a href="https://developer.huawei.com/consumer/cn/doc/quickApp-Guides/quickapp-installtool-0000001126543467">开发准备>安装开发工具</a>
INFO:app.services.content_parser:字段 changes 匹配成功: 安装开发工具 "快应用官方示例"、“快应用研发助手”打开入口集成到加载器中。 详情请参见“<a
INFO:app.api.ai_preview:成功提取字段 changes: 安装开发工具 "快应用官方示例"、“快应用研发助手”打开入口集成到加载器中。 详情请参见“<a...
INFO:app.services.content_parser:尝试匹配字段 descriptions，正则: (?:指南|组件|接口|框架)\s+变更点\s+说明(?:\s+[^\s]+)*?\s+((?:(?!^\d{4}版本更新说明)[^]+?)+?)(?=\d{4}版本更新说明|$)
INFO:app.services.content_parser:内容长度: 77288，内容前200字符: 1121版本更新说明（2025-6-6） 指南 变更点 说明 安装开发工具 "快应用官方示例"、“快应用研发助手”打开入口集成到加载器中。 详情请参见“<a href="https://developer.huawei.com/consumer/cn/doc/quickApp-Guides/quickapp-installtool-0000001126543467">开发准备>安装开发工具</a>
ERROR:app.services.content_parser:正则表达式错误 (?:指南|组件|接口|框架)\s+变更点\s+说明(?:\s+[^\s]+)*?\s+((?:(?!^\d{4}版本更新说明)[^]+?)+?)(?=\d{4}版本更新说明|$): unterminated character set at position 64
WARNING:app.api.ai_preview:字段 descriptions 提取失败，规则: regex:(?:指南|组件|接口|框架)\s+变更点\s+说明(?:\s+[^\s]+)*?\s+((?:(?!^\d{4}版本更新说明)[^]+?)+?)(?=\d{4}版本更新说明|$)
INFO:app.api.ai_preview:数据提取完成，共提取 2 个字段: ['version', 'changes']
INFO:app.services.code_executor:执行AI生成的格式化代码，数据字段: ['version', 'changes']
INFO:app.services.code_executor:代码执行成功，生成通知内容长度: 218 字符
INFO:app.api.ai_preview:AI代码执行成功，生成预览内容
INFO:     127.0.0.1:65104 - "POST /api/ai/preview HTTP/1.1" 200 OK
INFO:apscheduler.executors.default:Running job "荣耀调试器 (trigger: interval[0:10:00], next run at: 2025-06-17 18:55:42 CST)" (scheduled at 2025-06-17 18:45:42.145038+08:00)
INFO:app.services.monitor:[荣耀调试器] Starting task (acquired execution lock)...
INFO:app.services.monitor:[荣耀调试器] Loading page: https://developer.honor.com/cn/doc/guides/101380
INFO:app.services.monitor:[荣耀调试器] Extracting content with rule: xpath://*[@id="doc-content-text"]/div[2]/table/tbody/tr[2]
INFO:app.services.storage:[荣耀调试器] 📖 READ storage - Size: 279, Hash: 6820c984, Modified: 18:12:08, Version: None
INFO:app.services.monitor:[荣耀调试器] No change detected. No action needed.
INFO:apscheduler.executors.default:Job "荣耀调试器 (trigger: interval[0:10:00], next run at: 2025-06-17 18:55:42 CST)" executed successfully